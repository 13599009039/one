# 移动端ERP系统 - 联调测试计划

> **测试版本**: v1.0  
> **测试环境**: 生产环境  
> **测试域名**: http://m.erp.xnamb.cn  
> **创建日期**: 2026-02-19  
> **测试负责人**: 开发团队  
> **预计测试时间**: 2小时

---

## 一、测试环境准备

### 1.1 系统环境
- ✅ 域名: http://m.erp.xnamb.cn
- ✅ 服务器: 47.98.60.197
- ✅ Flask后端: 127.0.0.1:8050
- ✅ Nginx: 1.24.0 (Ubuntu)
- ✅ MySQL: 8.0.36

### 1.2 测试账号
- **用户名**: ajadmin
- **密码**: 123456
- **租户**: 许昌爱佳网络科技有限公司

### 1.3 测试工具
- [ ] Chrome浏览器 (最新版)
- [ ] Chrome DevTools (移动端模拟器)
- [ ] 真机测试 (iOS/Android)

---

## 二、功能测试用例

### 测试模块1: 登录认证 ✅

#### 用例1.1: 正常登录
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 访问 http://m.erp.xnamb.cn | 自动跳转登录页 | | ⏳ |
| 2 | 输入用户名: ajadmin | 输入框正常显示 | | ⏳ |
| 3 | 输入密码: 123456 | 密码字符隐藏显示 | | ⏳ |
| 4 | 勾选"记住密码" | 复选框选中 | | ⏳ |
| 5 | 点击"登录"按钮 | 显示加载中，1秒内登录成功 | | ⏳ |
| 6 | 验证跳转 | 跳转至主页面 /main/customer | | ⏳ |
| 7 | 验证Token | localStorage中保存mobile_erp_token | | ⏳ |
| 8 | 验证用户信息 | localStorage中保存mobile_erp_user | | ⏳ |

#### 用例1.2: 错误密码登录
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 输入用户名: ajadmin | 输入框正常显示 | | ⏳ |
| 2 | 输入错误密码: 000000 | 密码字符隐藏显示 | | ⏳ |
| 3 | 点击"登录"按钮 | 显示错误提示"密码错误" | | ⏳ |
| 4 | 验证状态 | 停留在登录页，未跳转 | | ⏳ |

#### 用例1.3: 空字段校验
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 不输入用户名和密码 | 登录按钮禁用或提示 | | ⏳ |
| 2 | 只输入用户名 | 登录按钮禁用或提示 | | ⏳ |
| 3 | 只输入密码 | 登录按钮禁用或提示 | | ⏳ |

---

### 测试模块2: 客户管理 ✅

#### 用例2.1: 客户列表加载
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 登录后进入客户列表页 | 页面正常加载 | | ⏳ |
| 2 | 验证列表数据 | 显示客户列表卡片 | | ⏳ |
| 3 | 验证卡片内容 | 包含客户名称、联系人、电话 | | ⏳ |
| 4 | 验证统计数据 | 显示订单数量、订单金额 | | ⏳ |

#### 用例2.2: 客户列表搜索
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击搜索框 | 搜索框获得焦点 | | ⏳ |
| 2 | 输入客户名称关键词 | 自动搜索过滤 | | ⏳ |
| 3 | 验证搜索结果 | 只显示匹配的客户 | | ⏳ |
| 4 | 清空搜索词 | 恢复显示所有客户 | | ⏳ |

#### 用例2.3: 客户列表分页
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 向下滚动列表 | 触发分页加载 | | ⏳ |
| 2 | 验证加载状态 | 显示"加载中..."提示 | | ⏳ |
| 3 | 验证新数据 | 新数据追加到列表末尾 | | ⏳ |
| 4 | 滚动到底部 | 显示"没有更多了"提示 | | ⏳ |

#### 用例2.4: 客户列表下拉刷新
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 下拉列表页面 | 显示下拉刷新动画 | | ⏳ |
| 2 | 松开手指 | 触发刷新请求 | | ⏳ |
| 3 | 验证刷新结果 | 列表数据重新加载 | | ⏳ |
| 4 | 验证动画 | 刷新完成后收起动画 | | ⏳ |

#### 用例2.5: 客户详情查看
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击客户卡片 | 跳转至客户详情页 | | ⏳ |
| 2 | 验证基本信息 | 显示客户名称、联系人等 | | ⏳ |
| 3 | 验证联系方式 | 显示电话、地址 | | ⏳ |
| 4 | 点击电话号码 | 弹出拨号界面 | | ⏳ |
| 5 | 验证最近订单 | 显示最近5笔订单 | | ⏳ |
| 6 | 点击订单卡片 | 跳转至订单详情页 | | ⏳ |

---

### 测试模块3: 订单管理 ✅

#### 用例3.1: 订单列表加载
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击底部"订单"Tab | 切换至订单列表页 | | ⏳ |
| 2 | 验证列表数据 | 显示订单列表卡片 | | ⏳ |
| 3 | 验证卡片内容 | 包含订单号、客户名称、金额 | | ⏳ |
| 4 | 验证状态标签 | 显示订单状态彩色标签 | | ⏳ |

#### 用例3.2: 订单状态筛选
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击"全部"Tab | 显示所有状态订单 | | ⏳ |
| 2 | 点击"待审核"Tab | 只显示待审核订单 | | ⏳ |
| 3 | 点击"已审核"Tab | 只显示已审核订单 | | ⏳ |
| 4 | 点击"已完成"Tab | 只显示已完成订单 | | ⏳ |
| 5 | 点击"已取消"Tab | 只显示已取消订单 | | ⏳ |

#### 用例3.3: 订单列表分页
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 向下滚动列表 | 触发分页加载 | | ⏳ |
| 2 | 验证加载状态 | 显示"加载中..."提示 | | ⏳ |
| 3 | 验证新数据 | 新数据追加到列表末尾 | | ⏳ |

#### 用例3.4: 订单详情查看
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击订单卡片 | 跳转至订单详情页 | | ⏳ |
| 2 | 验证状态卡片 | 显示紫色渐变背景状态卡片 | | ⏳ |
| 3 | 验证客户信息 | 显示客户名称、联系人、电话 | | ⏳ |
| 4 | 点击电话号码 | 弹出拨号界面 | | ⏳ |
| 5 | 验证服务项目 | 显示服务项目列表卡片 | | ⏳ |
| 6 | 验证金额汇总 | 显示订单总额（红色突出） | | ⏳ |
| 7 | 验证订单信息 | 显示订单号、订单日期等 | | ⏳ |

---

### 测试模块4: 数据统计 ✅

#### 用例4.1: 统计概览加载
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击底部"统计"Tab | 切换至统计页面 | | ⏳ |
| 2 | 验证今日数据卡片 | 显示紫色渐变背景卡片 | | ⏳ |
| 3 | 验证今日订单数 | 显示今日订单数量 | | ⏳ |
| 4 | 验证今日订单金额 | 显示今日订单金额 | | ⏳ |
| 5 | 验证本月数据卡片 | 显示本月订单数和金额 | | ⏳ |
| 6 | 验证累计数据卡片 | 显示累计订单数、客户数、订单金额 | | ⏳ |

#### 用例4.2: 排行榜功能
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击"客户排行"Tab | 切换至客户排行榜 | | ⏳ |
| 2 | 验证排行榜数据 | 显示客户排行列表 | | ⏳ |
| 3 | 验证勋章效果 | 前3名显示金银铜渐变勋章 | | ⏳ |
| 4 | 验证排名信息 | 显示排名、客户名称、订单数、金额 | | ⏳ |
| 5 | 点击"服务排行"Tab | 切换至服务排行榜 | | ⏳ |
| 6 | 验证排行榜数据 | 显示服务排行列表 | | ⏳ |
| 7 | 验证勋章效果 | 前3名显示金银铜渐变勋章 | | ⏳ |
| 8 | 验证排名信息 | 显示排名、服务名称、数量、金额 | | ⏳ |

#### 用例4.3: 统计数据刷新
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 下拉统计页面 | 显示下拉刷新动画 | | ⏳ |
| 2 | 松开手指 | 触发刷新请求 | | ⏳ |
| 3 | 验证刷新结果 | 统计数据重新加载 | | ⏳ |

---

### 测试模块5: 我的页面 ✅

#### 用例5.1: 用户信息展示
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击底部"我的"Tab | 切换至我的页面 | | ⏳ |
| 2 | 验证用户头部 | 显示紫色渐变背景头部 | | ⏳ |
| 3 | 验证用户头像 | 显示用户图标 | | ⏳ |
| 4 | 验证用户名称 | 显示"AJ管理员" | | ⏳ |
| 5 | 验证公司名称 | 显示租户公司名称 | | ⏳ |
| 6 | 验证账户信息 | 显示用户名、公司、租户ID | | ⏳ |

#### 用例5.2: 清除缓存功能
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击"清除缓存"选项 | 弹出确认对话框 | | ⏳ |
| 2 | 点击"取消"按钮 | 对话框关闭，不清除缓存 | | ⏳ |
| 3 | 再次点击"清除缓存" | 弹出确认对话框 | | ⏳ |
| 4 | 点击"确定"按钮 | 显示"缓存已清除"提示 | | ⏳ |
| 5 | 验证登录状态 | 用户仍然登录（Token未清除） | | ⏳ |

#### 用例5.3: 关于我们功能
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击"关于我们"选项 | 弹出关于对话框 | | ⏳ |
| 2 | 验证对话框内容 | 显示版本号、功能介绍 | | ⏳ |
| 3 | 点击"我知道了"按钮 | 对话框关闭 | | ⏳ |

#### 用例5.4: 退出登录功能
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击"退出登录"选项 | 弹出确认对话框 | | ⏳ |
| 2 | 点击"取消"按钮 | 对话框关闭，不退出登录 | | ⏳ |
| 3 | 再次点击"退出登录" | 弹出确认对话框 | | ⏳ |
| 4 | 点击"确定"按钮 | 显示"退出成功"提示 | | ⏳ |
| 5 | 验证跳转 | 自动跳转至登录页 | | ⏳ |
| 6 | 验证Token清除 | localStorage中Token已清除 | | ⏳ |
| 7 | 验证用户信息清除 | localStorage中用户信息已清除 | | ⏳ |

---

### 测试模块6: 导航与路由 ✅

#### 用例6.1: 底部Tab导航
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 点击"客户"Tab | 切换至客户列表页 | | ⏳ |
| 2 | 验证Tab高亮 | "客户"Tab高亮显示 | | ⏳ |
| 3 | 点击"订单"Tab | 切换至订单列表页 | | ⏳ |
| 4 | 验证Tab高亮 | "订单"Tab高亮显示 | | ⏳ |
| 5 | 点击"统计"Tab | 切换至统计页面 | | ⏳ |
| 6 | 验证Tab高亮 | "统计"Tab高亮显示 | | ⏳ |
| 7 | 点击"我的"Tab | 切换至我的页面 | | ⏳ |
| 8 | 验证Tab高亮 | "我的"Tab高亮显示 | | ⏳ |

#### 用例6.2: 页面返回导航
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 进入客户详情页 | 显示返回按钮 | | ⏳ |
| 2 | 点击返回按钮 | 返回客户列表页 | | ⏳ |
| 3 | 进入订单详情页 | 显示返回按钮 | | ⏳ |
| 4 | 点击返回按钮 | 返回订单列表页 | | ⏳ |

#### 用例6.3: 路由守卫验证
| 步骤 | 操作 | 预期结果 | 实际结果 | 状态 |
|-----|------|---------|---------|------|
| 1 | 清除Token并访问主页 | 自动跳转至登录页 | | ⏳ |
| 2 | 登录后访问登录页 | 自动跳转至主页 | | ⏳ |

---

## 三、API接口测试

### 3.1 认证接口测试

#### API 3.1.1: POST /api/mobile/auth/login
| 测试项 | 测试数据 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 正常登录 | {username:"ajadmin",password:"123456"} | 返回Token和用户信息 | | ⏳ |
| 错误密码 | {username:"ajadmin",password:"000000"} | 返回错误提示 | | ⏳ |
| 空用户名 | {username:"",password:"123456"} | 返回参数错误 | | ⏳ |
| 空密码 | {username:"ajadmin",password:""} | 返回参数错误 | | ⏳ |

#### API 3.1.2: POST /api/mobile/auth/logout
| 测试项 | 测试数据 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 正常退出 | 带有效Token | 返回成功 | | ⏳ |
| 无Token退出 | 不带Token | 返回401未授权 | | ⏳ |

### 3.2 客户接口测试

#### API 3.2.1: GET /api/mobile/customers
| 测试项 | 测试数据 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 正常查询 | {page:1,page_size:20} | 返回客户列表 | | ⏳ |
| 搜索查询 | {page:1,page_size:20,keyword:"张三"} | 返回匹配的客户 | | ⏳ |
| 分页查询 | {page:2,page_size:20} | 返回第2页数据 | | ⏳ |
| 无Token查询 | 不带Token | 返回401未授权 | | ⏳ |

#### API 3.2.2: GET /api/mobile/customers/:id
| 测试项 | 测试数据 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 正常查询 | id=1 | 返回客户详情和最近订单 | | ⏳ |
| 不存在的ID | id=999999 | 返回404未找到 | | ⏳ |

### 3.3 订单接口测试

#### API 3.3.1: GET /api/mobile/orders
| 测试项 | 测试数据 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 正常查询 | {page:1,page_size:20} | 返回订单列表 | | ⏳ |
| 状态筛选 | {page:1,page_size:20,status:"pending"} | 返回待审核订单 | | ⏳ |
| 分页查询 | {page:2,page_size:20} | 返回第2页数据 | | ⏳ |

#### API 3.3.2: GET /api/mobile/orders/:id
| 测试项 | 测试数据 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 正常查询 | id=1 | 返回订单详情和订单项 | | ⏳ |
| 不存在的ID | id=999999 | 返回404未找到 | | ⏳ |

### 3.4 统计接口测试

#### API 3.4.1: GET /api/mobile/statistics/overview
| 测试项 | 测试数据 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 正常查询 | 无参数 | 返回今日/本月/累计统计 | | ⏳ |

#### API 3.4.2: GET /api/mobile/statistics/ranking
| 测试项 | 测试数据 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|---------|------|
| 客户排行 | {type:"customer"} | 返回客户排行榜 | | ⏳ |
| 服务排行 | {type:"service"} | 返回服务排行榜 | | ⏳ |

---

## 四、性能测试

### 4.1 页面加载性能
| 测试项 | 目标值 | 实际值 | 状态 |
|-------|--------|--------|------|
| 首屏加载时间 | <3s | | ⏳ |
| 客户列表加载 | <1s | | ⏳ |
| 订单列表加载 | <1s | | ⏳ |
| 统计页面加载 | <1s | | ⏳ |
| 详情页面加载 | <500ms | | ⏳ |

### 4.2 API响应性能
| 测试项 | 目标值 | 实际值 | 状态 |
|-------|--------|--------|------|
| 登录API | <500ms | | ⏳ |
| 客户列表API | <500ms | | ⏳ |
| 订单列表API | <500ms | | ⏳ |
| 统计概览API | <500ms | | ⏳ |
| 详情API | <300ms | | ⏳ |

### 4.3 资源优化检查
| 测试项 | 目标值 | 实际值 | 状态 |
|-------|--------|--------|------|
| JS文件总大小 | <500KB | 239.55KB | ✅ |
| CSS文件总大小 | <100KB | 11.60KB | ✅ |
| 图片资源大小 | <50KB | <1KB | ✅ |
| Gzip压缩 | 开启 | | ⏳ |
| 静态资源缓存 | 30天 | | ⏳ |

---

## 五、兼容性测试

### 5.1 移动端浏览器兼容
| 浏览器 | 版本 | 测试结果 | 状态 |
|-------|------|---------|------|
| iOS Safari | 15+ | | ⏳ |
| Android Chrome | 90+ | | ⏳ |
| 微信内置浏览器 | 最新版 | | ⏳ |

### 5.2 屏幕尺寸适配
| 屏幕尺寸 | 分辨率 | 测试结果 | 状态 |
|---------|--------|---------|------|
| iPhone SE | 375x667 | | ⏳ |
| iPhone 12 | 390x844 | | ⏳ |
| iPhone 14 Pro Max | 430x932 | | ⏳ |
| Android 小屏 | 360x640 | | ⏳ |
| Android 大屏 | 414x896 | | ⏳ |

---

## 六、安全性测试

### 6.1 Token认证测试
| 测试项 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|------|
| 无Token访问主页 | 跳转登录页 | | ⏳ |
| 无Token访问API | 返回401未授权 | | ⏳ |
| Token过期访问 | 跳转登录页 | | ⏳ |
| 非法Token访问 | 跳转登录页 | | ⏳ |

### 6.2 租户隔离测试
| 测试项 | 预期结果 | 实际结果 | 状态 |
|-------|---------|---------|------|
| 查询客户列表 | 只返回本租户客户 | | ⏳ |
| 查询订单列表 | 只返回本租户订单 | | ⏳ |
| 查询统计数据 | 只统计本租户数据 | | ⏳ |

---

## 七、缺陷记录

### 缺陷1: [标题]
- **严重程度**: 
- **发现时间**: 
- **复现步骤**: 
- **预期结果**: 
- **实际结果**: 
- **修复状态**: 

---

## 八、测试总结

### 8.1 测试覆盖率
- **功能测试**: 0% (0/50)
- **API测试**: 0% (0/15)
- **性能测试**: 0% (0/10)
- **兼容性测试**: 0% (0/8)
- **安全性测试**: 0% (0/5)

### 8.2 测试结论
⏳ **待执行** - 请按照本计划逐项执行测试

### 8.3 遗留问题
无

### 8.4 上线建议
⏳ **等待测试完成后给出上线建议**

---

**测试计划编制**: AI Assistant  
**审核状态**: 待用户审核  
**下一步**: 执行联调测试
